import{R as D,a as y,r as o,e as S,j as e,y as I,s as w,z as C}from"./index-4PSb8Tkk.js";import{S as M,H as P}from"./header-DjdQG0Hr.js";import{S as t}from"./skeleton-Cjk3ifyC.js";import{h as p}from"./moment-BLMuvzoS.js";function k(){const{isSidebarHidden:g}=y(),[l,j]=o.useState(1),[c,N]=o.useState(10),[a,h]=o.useState({});o.useEffect(()=>{},[a]);const{data:u,isLoading:f,refetch:b}=S({queryKey:["ordersList",l,c],queryFn:async()=>C({page:l,pageSize:c,search:"",userId:"",year:0,month:0,startDate:"",endDate:""}),onError:s=>{console.log(s)}}),x=u?.results?.orders||[],d=Math.ceil(u?.results?.totalPages),m=s=>{s>0&&s<=d&&j(s)},v=async(s,r)=>{const n={orderId:s,status:r};try{const i=await I(n);i.error?w(i.message,"error"):b()}catch{console.log("An error occurred")}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-wrapper d-flex",children:[e.jsx(M,{}),e.jsxs("div",{className:g?"main-content flex-grow-1 full":"main-content flex-grow-1",id:"main-content",children:[e.jsx(P,{}),e.jsxs("main",{className:"p-4",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{className:"d-flex gap-3 align-items-center justify-content-between",children:e.jsx("h3",{className:"fw-semibold fs-5",children:"Order Management"})})}),e.jsx("div",{className:"table-responsive shadow-sm rounded bg-white p-3",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"Order ID"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Merchant"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Date"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:f?[...Array(c)].map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(t,{})}),e.jsx("td",{children:e.jsx(t,{})}),e.jsx("td",{children:e.jsx(t,{})}),e.jsx("td",{children:e.jsx(t,{})}),e.jsx("td",{children:e.jsx(t,{})}),e.jsx("td",{children:e.jsx(t,{})}),e.jsx("td",{children:e.jsx(t,{})}),e.jsx("td",{children:e.jsx(t,{})}),e.jsx("td",{children:e.jsx(t,{})})]},r)):x?.length?x?.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsxs("td",{children:["#",s.orderId]}),e.jsx("td",{children:s.userId.firstName}),e.jsx("td",{children:s?.merchant?.shopName}),e.jsx("td",{children:"2x Pizza, 1x Coke"}),e.jsxs("td",{children:["₹",s.amount]}),e.jsx("td",{children:e.jsxs("select",{value:s.status,className:"form-select form-select-sm status-dropdown",onChange:n=>v(s._id,n.target.value),children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Preparing",selected:!0,children:"Preparing"}),e.jsx("option",{value:"Out for Delivery",children:"Out for Delivery"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})}),e.jsx("td",{children:p(s.createdAt).format("DD MMM YYYY, hh:mm A")}),e.jsx("td",{className:"text-center",children:e.jsx("button",{className:"table-btn bg-main me-2","data-bs-toggle":"modal","data-bs-target":"#viewOrderModal",onClick:()=>h(s),children:e.jsx("i",{className:"fa fa-eye"})})})]},s._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center",children:"Oops! No Result Found."})})})]})})]}),x?.length?e.jsx("div",{className:"col-md-12 mt-3",children:e.jsxs("div",{className:"row align-items-center justify-content-between",children:[e.jsx("div",{className:"col-auto",children:e.jsxs("div",{className:"datafilter",children:[e.jsx("span",{children:"Showing"}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",value:c,onChange:s=>{N(parseInt(s.target.value,10)),j(1)},children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:15,children:"15"}),e.jsx("option",{value:20,children:"20"})]})]})}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"page_txt"})}),e.jsx("div",{className:"col-auto",children:e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsxs("ul",{className:"pagination border-0 gap-2",children:[e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${l===1?"disabled":""}`,onClick:()=>m(l-1),disabled:l===1,children:e.jsx("i",{class:"fa fa-angle-left"})})}),Array.from({length:d}).map((s,r)=>r+1).filter(s=>s===1||s===d||Math.abs(s-l)<=2).reduce((s,r,n,i)=>(n>0&&r-i[n-1]>1&&s.push("..."),s.push(r),s),[]).map((s,r)=>s==="..."?e.jsx("span",{className:"pagination-ellipsis",children:"..."},r):e.jsx(e.Fragment,{children:e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${l===s?"active":""}`,onClick:()=>m(s),children:s},r)})})),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${l===d?"disabled":""}`,onClick:()=>m(l+1),disabled:l===d,children:e.jsx("i",{class:"fa fa-angle-right"})})})]})})})]})}):""]})]})]}),e.jsx("div",{className:"modal fade",id:"viewOrderModal",tabIndex:-1,"aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-main fw-bold",children:"Order Details"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal",onClick:()=>h({})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"fw-bold text-main mb-2",children:"Customer Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",a?.userId?.firstName," ",a?.userId?.lastName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",a?.userId?.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",a?.userId?.phoneNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",a?.userId?.address_line2," ",a?.userId?.address_line1]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"fw-bold text-main mb-2",children:"Merchant Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shop:"})," ",a?.merchant?.shopName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",a?.merchant?.phoneNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",a?.merchant?.address]})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("h6",{className:"fw-bold text-main mb-2",children:"Order Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," #",a?.orderId]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Items:"})," 2x Pizza, 1x Coke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Amount:"})," ₹",a?.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Method:"})," UPI"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",a?.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Placed At:"})," ",p(a.createdAt).format("DD MMM YYYY, hh:mm A")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Expected Delivery:"})," 09 Sep 2025, 8:30 PM"]})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn comman-btn-main",onClick:()=>h({}),"data-bs-dismiss":"modal",children:"Close"})})]})})})]})}const _=D.memo(k);export{_ as default};
