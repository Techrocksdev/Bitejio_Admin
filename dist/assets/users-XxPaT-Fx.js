import{R as A,a as w,r as c,h as C,j as e,L as U,m as M,s as o,n as I,o as L}from"./index-DNwoCLRx.js";import{S as P,H as _}from"./header-B8Ob_Vu1.js";import{S as n}from"./skeleton-DnUj58d6.js";function D(){const{isSidebarHidden:p}=w(),[l,j]=c.useState(1),[d,b]=c.useState(10),[t,h]=c.useState({}),[f,u]=c.useState("");c.useEffect(()=>{},[t]);const{data:N,isLoading:v,refetch:g}=C({queryKey:["usersList",l,d],queryFn:async()=>L({page:l,pageSize:d,userType:"User",search:"",from:"",to:"",status:!0}),onError:s=>{console.log(s)}}),m=N?.results?.data||[],r=Math.ceil(N?.results?.totalPages),x=s=>{s>0&&s<=r&&j(s)},y=async s=>{try{const a=await M(s);a.error?o(a.message,"error"):(o(a.message,"success"),g())}catch{console.log("An error occurred")}},S=async s=>{try{const a=await I(s);a.error?o(a.message,"error"):(o(a.message,"success"),document.getElementById("close").click(),g())}catch{console.log("An error occurred")}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-wrapper d-flex",children:[e.jsx(P,{}),e.jsxs("div",{className:p?"main-content flex-grow-1 full":"main-content flex-grow-1",id:"main-content",children:[e.jsx(_,{}),e.jsxs("main",{className:"p-4",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{className:"d-flex gap-3 align-items-center justify-content-between",children:e.jsx("h3",{className:"fw-semibold fs-5",children:"User Management"})})}),e.jsx("div",{className:"table-responsive shadow-sm rounded bg-white p-3",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"First Name"}),e.jsx("th",{children:"Last Name"}),e.jsx("th",{children:"Username"}),e.jsx("th",{children:"Phone Number"}),e.jsx("th",{children:"Shop Name"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:v?[...Array(d)].map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(n,{})}),e.jsx("td",{children:e.jsx(n,{})}),e.jsx("td",{children:e.jsx(n,{})}),e.jsx("td",{children:e.jsx(n,{})}),e.jsx("td",{children:e.jsx(n,{})}),e.jsx("td",{children:e.jsx(n,{})}),e.jsx("td",{children:e.jsx(n,{})}),e.jsx("td",{children:e.jsx(n,{})}),e.jsx("td",{children:e.jsx(n,{})})]},a)):m?.length?m?.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:s.firstName||"N/A"}),e.jsx("td",{children:s.lastName||"N/A"}),e.jsx("td",{children:s.name||"N/A"}),e.jsx("td",{children:s.phoneNumber||"N/A"}),e.jsx("td",{children:s.shopName||"N/A"}),e.jsx("td",{children:s.userType||"N/A"}),e.jsx("td",{children:e.jsx("div",{className:"form-check form-switch",children:e.jsx("input",{className:"form-check-input",type:"checkbox",checked:s.status,onChange:()=>y(s._id)})})}),e.jsxs("td",{className:"text-center",children:[e.jsx("button",{className:"table-btn bg-main me-2","data-bs-toggle":"modal","data-bs-target":"#viewMerchantModal",onClick:()=>h(s),children:e.jsx("i",{className:"fa fa-eye"})}),e.jsx("button",{className:"table-btn bg-danger","data-bs-toggle":"modal","data-bs-target":"#delete",onClick:i=>{i.stopPropagation(),u(s._id)},children:e.jsx("i",{className:"fa fa-trash"})})]})]})):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center",children:"Oops! No Result Found."})})})]})})]}),m?.length?e.jsx("div",{className:"col-md-12 mt-3",children:e.jsxs("div",{className:"row align-items-center justify-content-between",children:[e.jsx("div",{className:"col-auto",children:e.jsxs("div",{className:"datafilter",children:[e.jsx("span",{children:"Showing"}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",value:d,onChange:s=>{b(parseInt(s.target.value,10)),j(1)},children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:15,children:"15"}),e.jsx("option",{value:20,children:"20"})]})]})}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"page_txt"})}),e.jsx("div",{className:"col-auto",children:e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsxs("ul",{className:"pagination border-0 gap-2",children:[e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${l===1?"disabled":""}`,onClick:()=>x(l-1),disabled:l===1,children:e.jsx("i",{class:"fa fa-angle-left"})})}),Array.from({length:r}).map((s,a)=>a+1).filter(s=>s===1||s===r||Math.abs(s-l)<=2).reduce((s,a,i,k)=>(i>0&&a-k[i-1]>1&&s.push("..."),s.push(a),s),[]).map((s,a)=>s==="..."?e.jsx("span",{className:"pagination-ellipsis",children:"..."},a):e.jsx(e.Fragment,{children:e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${l===s?"active":""}`,onClick:()=>x(s),children:s},a)})})),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${l===r?"disabled":""}`,onClick:()=>x(l+1),disabled:l===r,children:e.jsx("i",{class:"fa fa-angle-right"})})})]})})})]})}):""]})]})]}),e.jsx("div",{className:"modal fade",id:"viewMerchantModal",tabIndex:-1,"aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-main fw-bold",children:"User Details"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal",onClick:()=>h({})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"First Name:"})," ",t?.firstName||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last Name:"})," ",t?.lastName||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Username:"})," ",t?.name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t?.email||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone Number:"})," ",t?.phoneNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shop Name:"})," ",t?.shopName||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",t?.userType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",t?.status?"Active":"Inactive"]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn comman-btn-main","data-bs-dismiss":"modal",onClick:()=>h({}),children:"Close"})})]})})}),e.jsx("div",{className:"modal fade logoutmodal",id:"delete",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsx("div",{className:"modal-content",children:e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"paymentmodal_main text-center",children:[e.jsxs("div",{className:"payment_head mb-3 mt-1",children:[e.jsx("h2",{children:"Confirmation"}),e.jsx("p",{children:"Are you sure you want to delete this user?"})]}),e.jsxs("div",{className:"row justify-content-center mb-2",children:[e.jsx("div",{className:"col-auto",children:e.jsx("button",{className:"comman-btn-main",onClick:()=>S(f),children:"Yes"})}),e.jsx("div",{className:"col-auto",children:e.jsx(U,{className:"comman-btn-main white","data-bs-dismiss":"modal",to:"",onClick:()=>u(""),id:"close",children:"No"})})]})]})})})})})]})}const H=A.memo(D);export{H as default};
