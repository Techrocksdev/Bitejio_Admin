import{R as C,r,j as e,L as S,b as w}from"./index-D1sNlBEA.js";import{S as A,H as _}from"./header-CzkDpk5w.js";import{u as M,S as v}from"./skeleton-BtLwel5k.js";import{u as E,F,e as I,b as z,s as m,c as P,d as U,g as D}from"./index-B1rcRsNj.js";function L({details:s,setDetails:u,refetch:i}){const{register:g,handleSubmit:N,formState:{errors:o},reset:f,setValue:h}=E({mode:"onChange"}),[x,p]=r.useState(!1),[t,j]=r.useState(null);r.useEffect(()=>{s?.name_en?(h("name_en",s?.name_en),h("status",s?.status)):f()},[s]);const n=async c=>{if(!t?.name){alert.show("Please upload a file");return}p(!0);const d=new FormData;d.append("image",t),Object.keys(c).forEach(a=>{d.append(a,c[a])});try{const a=await s?.name_en?I(s._id,d):z(d);a.error?m(a.message,"error"):(m(a.message,"success"),document.getElementById("closeAddMerchantModal").click(),setTimeout(()=>{i()},500))}catch{console.log("An error occurred")}finally{p(!1)}},b=c=>{const d=c.target.files[0];j(d)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title text-main fw-bold",children:[s?.name_en?"Edit":"Add"," Merchant"]}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"closeAddMerchantModal",onClick:()=>{f(),u({})}})]}),e.jsxs("form",{onSubmit:N(n),children:[e.jsxs("div",{className:"modal-body row g-3",children:[e.jsxs("div",{className:"mb-3",children:[t?.name?e.jsx("div",{className:"img-wrap",children:e.jsx("img",{src:URL.createObjectURL(t),alt:"Uploaded Image"})}):e.jsx("label",{htmlFor:"photo-upload",className:"custom-file-upload",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"}),e.jsx("br",{}),"Upload Image"]})}),e.jsx("input",{id:"photo-upload",type:"file",onChange:c=>b(c)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label fw-semibold",children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${o.name_en?"input-error":""}`,placeholder:"Enter category name",...g("name_en ",{required:"Category name is required"})}),o.name_en&&e.jsx("p",{className:"form-error",children:o.name_en.message})]}),e.jsxs("div",{className:"col-md-6 d-flex align-items-center",children:[e.jsx("label",{className:"form-label fw-semibold me-3",children:"Status"}),e.jsx("div",{className:"form-check form-switch",children:e.jsx("input",{className:"form-check-input",type:"checkbox",defaultChecked:s?.name_en?"":!0,...g("status")})})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"submit",className:"btn comman-btn-main",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"me-2",children:"Saving..."}),e.jsx(F,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):s?.name_en?"Edit":"Save"})})]})]})})}const $=C.memo(L);function R(){const[s,u]=r.useState(1),[i,g]=r.useState(10),[N,o]=r.useState({}),[f,h]=r.useState("");r.useEffect(()=>{},[N]);const{data:x,isLoading:p,refetch:t}=M({queryKey:["categoryList",s,i],queryFn:async()=>D({page:s,pageSize:i,categoryId:"",allSubcategory:!1,search:""}),onError:a=>{console.log(a)}}),j=x?.results?.data||[],n=Math.ceil(x?.results?.totalPages),b=a=>{a>0&&a<=n&&u(a)},c=async a=>{try{const l=await P(a);l.error?m(l.message,"error"):(m(l.message,"success"),t())}catch{console.log("An error occurred")}},d=async a=>{try{const l=await U(a);l.error?m(l.message,"error"):(m(l.message,"success"),document.getElementById("close").click(),t())}catch{console.log("An error occurred")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end align-items-center mb-3",children:e.jsxs("button",{className:"btn btn-sm bg-main text-white","data-bs-toggle":"modal","data-bs-target":"#addCategoryModal",children:[e.jsx("i",{className:"fa fa-plus"})," Add Category"]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"Category Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:p?[...Array(i)].map((a,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(v,{})}),e.jsx("td",{children:e.jsx(v,{})}),e.jsx("td",{children:e.jsx(v,{})}),e.jsx("td",{children:e.jsx(v,{})})]},l)):j?.length?j?.map((a,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsx("td",{children:a.firstName}),e.jsx("td",{children:e.jsx("div",{className:"form-check form-switch",children:e.jsx("input",{className:"form-check-input",type:"checkbox",checked:a.status,onChange:()=>c(a._id)})})}),e.jsxs("td",{className:"text-center",children:[e.jsx("button",{className:"table-btn bg-main me-2","data-bs-toggle":"modal","data-bs-target":"#addCategoryModal",onClick:()=>o(a),children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"table-btn bg-danger","data-bs-toggle":"modal","data-bs-target":"#delete",onClick:y=>{y.stopPropagation(),h(a._id)},children:e.jsx("i",{className:"fa fa-trash"})})]})]})):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"Oops! No Result Found."})})})]})}),j?.length?e.jsx("div",{className:"col-md-12 mt-3",children:e.jsxs("div",{className:"row align-items-center justify-content-between",children:[e.jsx("div",{className:"col-auto",children:e.jsxs("div",{className:"datafilter",children:[e.jsx("span",{children:"Showing"}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",value:i,onChange:a=>{g(parseInt(a.target.value,10)),u(1)},children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:15,children:"15"}),e.jsx("option",{value:20,children:"20"})]})]})}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"page_txt"})}),e.jsx("div",{className:"col-auto",children:e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsxs("ul",{className:"pagination border-0",children:[e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${s===1?"disabled":""}`,onClick:()=>b(s-1),disabled:s===1,children:e.jsx("img",{src:"assets/img/page_left.png",alt:""})})}),Array.from({length:n}).map((a,l)=>l+1).filter(a=>a===1||a===n||Math.abs(a-s)<=2).reduce((a,l,y,k)=>(y>0&&l-k[y-1]>1&&a.push("..."),a.push(l),a),[]).map((a,l)=>a==="..."?e.jsx("span",{className:"pagination-ellipsis",children:"..."},l):e.jsx(e.Fragment,{children:e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${s===a?"active":""}`,onClick:()=>b(a),children:a},l)})})),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:`page-link ${s===n?"disabled":""}`,onClick:()=>b(s+1),disabled:s===n,children:e.jsx("img",{src:"assets/img/pagee_right.png",alt:""})})})]})})})]})}):"",e.jsx("div",{className:"modal fade",id:"addCategoryModal",tabIndex:-1,"aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:e.jsx($,{details:N,setDetails:o,refetch:t})})}),e.jsx("div",{className:"modal fade logoutmodal",id:"delete",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsx("div",{className:"modal-content",children:e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"paymentmodal_main text-center",children:[e.jsxs("div",{className:"payment_head mb-3 mt-1",children:[e.jsx("h2",{children:"Confirmation"}),e.jsx("p",{children:"Are you sure you want to delete this user?"})]}),e.jsxs("div",{className:"row justify-content-center mb-2",children:[e.jsx("div",{className:"col-auto",children:e.jsx("button",{className:"comman-btn-main",onClick:()=>d(f),children:"Yes"})}),e.jsx("div",{className:"col-auto",children:e.jsx(S,{className:"comman-btn-main white","data-bs-dismiss":"modal",to:"",onClick:()=>h(""),id:"close",children:"No"})})]})]})})})})})]})}const B=C.memo(R);function V(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end align-items-center mb-3",children:e.jsxs("button",{className:"btn btn-sm bg-main text-white","data-bs-toggle":"modal","data-bs-target":"#addSubcategoryModal",children:[e.jsx("i",{className:"fa fa-plus"})," Add Subcategory"]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Category Name"}),e.jsx("th",{children:"Subcategory Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:"1"}),e.jsx("td",{children:"Pizza"}),e.jsx("td",{children:"Veg Pizza"}),e.jsx("td",{children:e.jsx("div",{className:"form-check form-switch",children:e.jsx("input",{className:"form-check-input",type:"checkbox",defaultChecked:!0})})}),e.jsxs("td",{className:"text-center",children:[e.jsx("button",{className:"table-btn bg-main me-2","data-bs-toggle":"modal","data-bs-target":"#editSubcategoryModal",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"table-btn bg-danger",children:e.jsx("i",{className:"fa fa-trash"})})]})]})})]})})]})}const q=C.memo(V);function H(){const{isSidebarHidden:s}=w();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-wrapper d-flex",children:[e.jsx(A,{}),e.jsxs("div",{className:s?"main-content flex-grow-1 full":"main-content flex-grow-1",id:"main-content",children:[e.jsx(_,{}),e.jsx("main",{className:"p-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"fw-semibold text-white fs-5",children:"Category Management"})}),e.jsxs("div",{className:"card-body tab-content",children:[e.jsxs("ul",{className:"nav nav-tabs card-header-tabs",id:"categoryTabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link active",id:"category-tab","data-bs-toggle":"tab",href:"#category",role:"tab",children:"Category"})}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link",id:"subcategory-tab","data-bs-toggle":"tab",href:"#subcategory",role:"tab",children:"Subcategory"})})]}),e.jsx("div",{className:"tab-pane fade show active",id:"category",role:"tabpanel",children:e.jsx(B,{})}),e.jsx("div",{className:"tab-pane fade",id:"subcategory",role:"tabpanel",children:e.jsx(q,{})})]})]})})]})]}),e.jsx("div",{className:"modal fade",id:"addCategoryModal",tabIndex:-1,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-main fw-bold",children:"Add Category"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Category Name"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter category name"})]}),e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",defaultChecked:!0}),e.jsx("label",{className:"form-check-label",children:"Active"})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn comman-btn-main",children:"Save"})})]})})}),e.jsx("div",{className:"modal fade",id:"editCategoryModal",tabIndex:-1,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-main fw-bold",children:"Edit Category"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Category Name"}),e.jsx("input",{type:"text",className:"form-control",defaultValue:"Pizza"})]}),e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",defaultChecked:!0}),e.jsx("label",{className:"form-check-label",children:"Active"})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn comman-btn-main",children:"Update"})})]})})}),e.jsx("div",{className:"modal fade",id:"addSubcategoryModal",tabIndex:-1,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-main fw-bold",children:"Add Subcategory"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Select Category"}),e.jsxs("select",{className:"form-select",children:[e.jsx("option",{children:"Pizza"}),e.jsx("option",{children:"Burger"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Subcategory Name"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter subcategory name"})]}),e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",defaultChecked:!0}),e.jsx("label",{className:"form-check-label",children:"Active"})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn comman-btn-main",children:"Save"})})]})})}),e.jsx("div",{className:"modal fade",id:"editSubcategoryModal",tabIndex:-1,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-main fw-bold",children:"Edit Subcategory"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Select Category"}),e.jsxs("select",{className:"form-select",children:[e.jsx("option",{selected:!0,children:"Pizza"}),e.jsx("option",{children:"Burger"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Subcategory Name"}),e.jsx("input",{type:"text",className:"form-control",defaultValue:"Veg Pizza"})]}),e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",defaultChecked:!0}),e.jsx("label",{className:"form-check-label",children:"Active"})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn comman-btn-main",children:"Update"})})]})})})]})}const Q=C.memo(H);export{Q as default};
