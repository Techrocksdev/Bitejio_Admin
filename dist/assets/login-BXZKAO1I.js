import{R as x,r as i,u as p,a as f,j as e,L as j,b as w,s as m}from"./index-CgaEN1a8.js";import{u as N,F as v}from"./index-DsWZgHVr.js";function k(){const{register:l,handleSubmit:d,formState:{errors:s}}=N({mode:"onChange"}),[t,h]=i.useState(!1),[c,n]=i.useState(!1),o=p(),{refetch:u}=f();i.useEffect(()=>{localStorage.getItem("token-bit-admin")&&localStorage.getItem("rememberMe-bit-admin")&&o("/admin/dashboard")},[o]);const b=()=>h(!t),g=async a=>{n(!0),a.fcmToken=localStorage.getItem("fcmTokenBit"),a.deviceId=localStorage.getItem("uid-bit-admin"),a.deviceOS="web";try{const r=await w(a);r.error?m(r.message,"error"):(localStorage.setItem("token-bit-admin",r.results.token),m(r.message,"success"),o("/admin/dashboard"),u())}catch{console.log("An error occurred")}finally{n(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-hidden d-flex align-items-center justify-content-center vh-100",children:e.jsxs("div",{className:"card shadow p-4 border-0 login-card",children:[e.jsx("div",{className:"login-img",children:e.jsx("img",{src:"/assets/image/project/logo-main.svg",className:"w-100 h-100 object-fit-contain",alt:""})}),e.jsx("h3",{className:"text-center mb-4 text-main fw-bold",children:"Welcome Back"}),e.jsxs("form",{onSubmit:d(g),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"text",className:`form-control ${s.email?"input-error":""}`,placeholder:"Enter your email",...l("email",{required:"Email is required",pattern:{value:/^(?!.*\.\.)[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Enter a valid email address"}})}),s.email&&e.jsx("p",{className:"form-error",children:s.email.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsxs("div",{className:"position-relative",children:[e.jsx("input",{type:t?"text":"password",className:`form-control pe-5 ${s.password?"input-error":""}`,placeholder:"Enter your password",...l("password",{required:"Password is required",pattern:{value:/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#^])[A-Za-z\d@$!%*?&#^]{8,}$/,message:"Password must be 8+ characters with uppercase, number and special character"}})}),e.jsx("i",{className:`fa pass-eye ${t?"fa-eye-slash":"fa-eye"}`,onClick:b})]}),s.password&&e.jsx("p",{className:"form-error",children:s.password.message})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"rememberMe",onChange:a=>localStorage.setItem("rememberMe-bit-admin",a.target.checked)}),e.jsx("label",{className:"form-check-label text",htmlFor:"rememberMe",children:"Remember me"})]}),e.jsx(j,{to:"/forgot-password",className:"view-all",children:"Forgot Password?"})]}),e.jsx("button",{type:"submit",className:"btn w-100 comman-btn-main",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"me-2",children:"Wait..."}),e.jsx(v,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):"Login"})]})]})})})}const A=x.memo(k);export{A as default};
